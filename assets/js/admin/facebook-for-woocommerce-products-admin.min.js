"use strict";function ajax(o){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,c=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,i=Object.assign({},{action:o},e);jQuery.post(ajaxurl,i,function(o){t&&t(o)}).fail(function(o){c&&c(o)})}function fb_toggle_visibility(o,e){var t=document.querySelector("#viz_"+o),c=document.querySelector("#tip_"+o);return e?(c.setAttribute("data-tip","Product is synced and published (visible) on Facebook."),t.setAttribute("onclick","fb_toggle_visibility("+o+", false)"),t.innerHTML="Hide",t.setAttribute("class","button")):(c.setAttribute("data-tip","Product is synced but not marked as published (visible) on Facebook."),t.setAttribute("onclick","fb_toggle_visibility("+o+", true)"),t.innerHTML="Show",t.setAttribute("class","button button-primary button-large")),jQuery(function(o){o(".tips").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200})}),jQuery.post(ajaxurl,{action:"facebook_for_woocommerce_set_products_visibility",security:facebook_for_woocommerce_products_admin.set_product_visibility_nonce,products:[{product_id:o,visibility:e?"yes":"no"}]})}jQuery(document).ready(function(a){var o=window.pagenow.length?window.pagenow:"";window.typenow.length&&window.typenow;if("edit-product"===o){var i=!1;a("input#doaction, input#doaction2").on("click",function(o){if(i)return!0;o.preventDefault();var e=a(this),t=e.prev("select").val();if("facebook_exclude"===t||"facebook_include"===t){var c=[];a.each(a('input[name="post[]"]:checked'),function(){c.push(parseInt(a(this).val(),10))}),a.post(facebook_for_woocommerce_products_admin.ajax_url,{action:"facebook_for_woocommerce_set_product_sync_bulk_action_prompt",security:facebook_for_woocommerce_products_admin.set_product_sync_bulk_action_prompt_nonce,toggle:t,products:c},function(o){o&&!o.success?(a("#wc-backbone-modal-dialog .modal-close").trigger("click"),new a.WCBackboneModal.View({target:"facebook-for-woocommerce-modal",string:o.data}),a(".facebook-for-woocommerce-toggle-product-visibility").on("click",function(o){blockModal(),a(this).hasClass("hide-products")&&a.each(c,function(){var o=a("#post-"+this).find("td.facebook_catalog_visibility a");"visible"===o.data("product-visibility")&&o.trigger("click")}),i=!0,e.trigger("click")})):(i=!0,e.trigger("click"))})}else i=!0,e.trigger("click")})}if("product"===o){var e=function(o,e){e.find(".enable-if-sync-enabled").prop("disabled",!o)},t=a("#fb_sync_enabled"),c=t.closest(".woocommerce_options_panel");t.on("click",function(){e(a(this).prop("checked"),c)}),e(t.prop("checked"),c),a(".woocommerce_variations").on("change",".js-variable-fb-sync-toggle",function(){e(a(this).prop("checked"),a(this).closest(".wc-metabox-content"))}),a("#woocommerce-product-data").on("change",".js-fb-product-image-source",function(){var o=a(this).closest(".woocommerce_options_panel, .wc-metabox-content"),e=a(this).val();o.find(".product-image-source-field").closest(".form-field").hide(),o.find(".show-if-product-image-source-"+e).closest(".form-field").show()}),a(".js-fb-product-image-source:checked").trigger("change"),a("#woocommerce-product-data").on("woocommerce_variations_loaded",function(){a(".js-variable-fb-sync-toggle").trigger("change"),a(".js-fb-product-image-source:checked").trigger("change")});var s=!1;a('form#post input[type="submit"]').on("click",function(o){if(s)return!0;o.preventDefault();var e=a(this),t=a('input[name="fb_visibility"]'),c=parseInt(a("input#post_ID").val(),10),i=[],n=a('textarea[name="tax_input[product_tag]"]').val().split(","),r=a("input#fb_sync_enabled").prop("checked");a('#taxonomy-product_cat input[name="tax_input[product_cat][]"]:checked').each(function(){i.push(parseInt(a(this).val(),10))}),0<c?a.post(facebook_for_woocommerce_products_admin.ajax_url,{action:"facebook_for_woocommerce_set_product_sync_prompt",security:facebook_for_woocommerce_products_admin.set_product_sync_prompt_nonce,sync_enabled:r?"enabled":"disabled",product:c,categories:i,tags:n},function(o){o&&!o.success&&(r||!r&&t.length&&t.is(":checked"))?(a("#wc-backbone-modal-dialog .modal-close").trigger("click"),new a.WCBackboneModal.View({target:"facebook-for-woocommerce-modal",string:o.data}),a(".facebook-for-woocommerce-toggle-product-visibility").on("click",function(o){blockModal(),a(this).hasClass("hide-products")&&t.prop("checked",!1),s=!0,e.trigger("click")})):(s=!0,e.trigger("click"))}):(s=!0,e.trigger("click"))})}});
//# sourceMappingURL=facebook-for-woocommerce-products-admin.min.js.map
