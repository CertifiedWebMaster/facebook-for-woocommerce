"use strict";jQuery(document).ready(function(d){var c=Boolean(wc_facebook_commerce_orders.is_commerce_order),o={restrict_order_statuses:function(e){e.find("option").each(function(e,o){-1===wc_facebook_commerce_orders.allowed_commerce_statuses.indexOf(o.value)&&o.remove()})},toggle_created_date_fields_status:function(e){d("#order_data").find("input[name*=order_date]").prop("disabled",!e).toggleClass("disabled",!e)},disable_order_status_field:function(e){e.prop("disabled",!0).addClass("disabled")},toggle_order_customer_field:function(e){d("#order_data").find(".form-field.wc-customer-user").toggleClass("hidden",e)},toggle_billing_and_shipping_fields:function(e){d("#order_data").find("a.edit_address").toggleClass("hidden",e)},disable_pending_order_related_fields:function(e){o.toggle_created_date_fields_status(!1),o.disable_order_status_field(e),o.toggle_order_customer_field(!0),o.toggle_billing_and_shipping_fields(!0)},maybe_disable_refunds:function(){"completed"!==wc_facebook_commerce_orders.order_status&&(d(".wc-order-bulk-actions .refund-items").hide(),a.find('option[value="wc-refunded"]').remove())}},r=d('form[id="post"]'),a=d("#order_status"),_=a.val(),e=wc_facebook_commerce_orders.shipment_tracking,n="",t="";function l(e){unBlockModal(),d(".facebook-for-woocommerce-modal .wc-backbone-modal-content article").html("<p>"+e+"</p>"),d(".facebook-for-woocommerce-modal .wc-backbone-modal-content footer").remove()}function s(e,o,c){var r=0<arguments.length&&void 0!==e&&e,a=1<arguments.length&&void 0!==o?o:null,_=2<arguments.length&&void 0!==c?c:null;_=_||d("#wc_facebook_carrier").val(),(a=a||d("#wc_facebook_tracking_number").val()).length?(r&&blockModal(),d.post(ajaxurl,{action:wc_facebook_commerce_orders.complete_order_action,order_id:d("#post_ID").val(),tracking_number:a,carrier_code:_,nonce:wc_facebook_commerce_orders.complete_order_nonce},function(e){e&&e.success?(r&&unBlockModal(),d("#post").data("allow-submit",!0).trigger("submit")):l(e&&e.data?e.data:wc_facebook_commerce_orders.i18n.unknown_error)}).fail(function(){l(wc_facebook_commerce_orders.i18n.unknown_error)})):alert(wc_facebook_commerce_orders.i18n.missing_tracking_number_error)}Array.isArray(e)&&e[0]&&(n=e[0].tracking_number,t=e[0].carrier_code),c&&(o.restrict_order_statuses(a),"pending"===wc_facebook_commerce_orders.order_status&&o.disable_pending_order_related_fields(a),"cancelled"===wc_facebook_commerce_orders.order_status&&o.disable_order_status_field(a),o.maybe_disable_refunds()),r.on("submit",function(e){if(!d("#post").data("skip-cancel-modal")&&"wc-cancelled"!==_&&c&&"wc-cancelled"===a.val())return e.preventDefault(),d("#wc-backbone-modal-dialog .modal-close").trigger("click"),new d.WCBackboneModal.View({target:"facebook-for-woocommerce-modal",string:{message:wc_facebook_commerce_orders.cancel_modal_message,buttons:wc_facebook_commerce_orders.cancel_modal_buttons}}),d(".facebook-for-woocommerce-modal #btn-ok").off("click.facebook_for_commerce").on("click.facebook_for_commerce",function(e){e.preventDefault(),e.stopPropagation(),blockModal(),d.post(ajaxurl,{action:wc_facebook_commerce_orders.cancel_order_action,order_id:d("#post_ID").val(),reason_code:d('.facebook-for-woocommerce-modal [name="wc_facebook_cancel_reason"]').val(),security:wc_facebook_commerce_orders.cancel_order_nonce},function(e){e&&e.success?d("#post").data("skip-cancel-modal",!0).trigger("submit"):l(e&&e.data?e.data:wc_facebook_commerce_orders.i18n.unknown_error)}).fail(function(){l(wc_facebook_commerce_orders.i18n.unknown_error)})}),!1;if(c&&!r.data("allow-submit")){var o=a.val();"wc-refunded"===o&&_!==o&&(e.preventDefault(),d("#wc-backbone-modal-dialog .modal-close").trigger("click"),new d.WCBackboneModal.View({target:"facebook-for-woocommerce-modal",string:{message:wc_facebook_commerce_orders.refund_modal_message,buttons:wc_facebook_commerce_orders.refund_modal_buttons}}),d(document.body).off("wc_backbone_modal_response.facebook_for_commerce").on("wc_backbone_modal_response.facebook_for_commerce",function(){d("#refund_reason").val(d("#wc_facebook_refund_reason_modal").val()),r.data("allow-submit",!0).submit()})),"wc-completed"===o&&(e.preventDefault(),n||t?s(!1,n,t):(d("#wc-backbone-modal-dialog .modal-close").trigger("click"),new d.WCBackboneModal.View({target:"facebook-for-woocommerce-modal",string:{message:wc_facebook_commerce_orders.complete_modal_message,buttons:wc_facebook_commerce_orders.complete_modal_buttons}}),d(".facebook-for-woocommerce-modal #btn-ok").off("click.facebook_for_commerce").on("click.facebook_for_commerce",function(e){e.preventDefault(),e.stopPropagation(),s(!0)})))}})});
//# sourceMappingURL=orders.min.js.map
