"use strict";jQuery(document).ready(function(r){var e,o,c,a,d=Boolean(wc_facebook_commerce_orders.is_commerce_order),_={restrict_order_statuses:function(e){e.find("option").each(function(e,o){-1===wc_facebook_commerce_orders.allowed_commerce_statuses.indexOf(o.value)&&o.remove()})},toggle_created_date_fields_status:function(e){r("#order_data").find("input[name*=order_date]").prop("disabled",!e).toggleClass("disabled",!e)},disable_order_status_field:function(e){e.prop("disabled",!0).addClass("disabled")},toggle_order_customer_field:function(e){r("#order_data").find(".form-field.wc-customer-user").toggleClass("hidden",e)},toggle_billing_and_shipping_fields:function(e){r("#order_data").find("a.edit_address").toggleClass("hidden",e)},disable_pending_order_related_fields:function(e){_.toggle_created_date_fields_status(!1),_.disable_order_status_field(e),_.toggle_order_customer_field(!0),_.toggle_billing_and_shipping_fields(!0)},maybe_disable_refunds:function(){"completed"!==wc_facebook_commerce_orders.order_status&&(r(".wc-order-bulk-actions .refund-items").hide(),t.find('option[value="wc-refunded"]').remove())}},n=r('form[id="post"]'),t=r("#order_status"),s=t.val();function l(e){unBlockModal(),r(".facebook-for-woocommerce-modal .wc-backbone-modal-content article").html("<p>"+e+"</p>"),r(".facebook-for-woocommerce-modal .wc-backbone-modal-content footer").remove()}function i(e,o,r,c){var a=e.find('label[for="'+o+'"]'),d=a.find(".woocommerce-help-tip").clone();a.text(r),c&&d.length&&(a.prepend(d),d.attr("data-tip",c).tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200}))}d&&(_.restrict_order_statuses(t),"pending"===wc_facebook_commerce_orders.order_status&&_.disable_pending_order_related_fields(t),"cancelled"===wc_facebook_commerce_orders.order_status&&_.disable_order_status_field(t),_.maybe_disable_refunds()),d&&(e=r("#refund_reason"),o=r("#wc_facebook_refund_reason").css("width",e.css("width")),c=e.closest("tr"),a=c.clone(),c.find("td.total").css("width","16em").end().find("#refund_reason").replaceWith(o.show()).end().find('label[for="refund_reason"]').attr("for","wc_facebook_refund_reason"),c.after(a),i(c,"wc_facebook_refund_reason",wc_facebook_commerce_orders.i18n.refund_reason_label,wc_facebook_commerce_orders.i18n.refund_reason_tooltip),i(a,"refund_reason",wc_facebook_commerce_orders.i18n.refund_description_label,wc_facebook_commerce_orders.i18n.refund_description_tooltip)),n.on("submit",function(e){if(!r("#post").data("skip-cancel-modal")&&"wc-cancelled"!==s&&d&&"wc-cancelled"===r("#order_status").val())return e.preventDefault(),r("#wc-backbone-modal-dialog .modal-close").trigger("click"),new r.WCBackboneModal.View({target:"facebook-for-woocommerce-modal",string:{message:wc_facebook_commerce_orders.cancel_modal_message,buttons:wc_facebook_commerce_orders.cancel_modal_buttons}}),r(".facebook-for-woocommerce-modal #btn-ok").off("click.facebook_for_commerce").on("click.facebook_for_commerce",function(e){e.preventDefault(),e.stopPropagation(),blockModal(),r.post(ajaxurl,{action:wc_facebook_commerce_orders.cancel_order_action,order_id:r("#post_ID").val(),reason_code:r('.facebook-for-woocommerce-modal [name="wc_facebook_cancel_reason"]').val(),security:wc_facebook_commerce_orders.cancel_order_nonce},function(e){e&&e.success?r("#post").data("skip-cancel-modal",!0).trigger("submit"):l(e&&e.data?e.data:wc_facebook_commerce_orders.i18n.unknown_error)}).fail(function(){l(wc_facebook_commerce_orders.i18n.unknown_error)})}),!1;if(d&&!n.data("allow-submit")){var o=t.val();"wc-refunded"===o&&s!==o&&(e.preventDefault(),r("#wc-backbone-modal-dialog .modal-close").trigger("click"),new r.WCBackboneModal.View({target:"facebook-for-woocommerce-modal",string:{message:wc_facebook_commerce_orders.refund_modal_message,buttons:wc_facebook_commerce_orders.refund_modal_buttons}}),r(document.body).off("wc_backbone_modal_response.facebook_for_commerce").on("wc_backbone_modal_response.facebook_for_commerce",function(){r("#refund_reason").val(r("#wc_facebook_refund_reason_modal").val()),n.data("allow-submit",!0).submit()}))}})});
//# sourceMappingURL=orders.min.js.map
