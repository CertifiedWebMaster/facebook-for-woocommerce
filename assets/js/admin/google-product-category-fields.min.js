"use strict";var _createClass=function(){function c(e,o){for(var t=0;t<o.length;t++){var c=o[t];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}return function(e,o,t){return o&&c(e.prototype,o),t&&c(e,t),e}}();function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}jQuery(document).ready(function(l){function a(e,o){var t=this;_classCallCheck(this,a),this.categories=e,this.input_id=o;var c=l("#"+this.input_id);l('<div id="wc-facebook-google-product-category-fields"></div>').insertBefore(c).on("change","select.wc-facebook-google-product-category-select",function(e){t.onChange(l(e.target))}),this.addInitialSelects(c.val())}window.WC_Facebook_Google_Product_Category_Fields=(_createClass(a,[{key:"addInitialSelects",value:function(e){var o=this;if(e){this.getSelectedCategoryIds(e).forEach(function(e){o.addSelect(o.getOptions(e[1]),e[0])});var t=this.getOptions(e);Object.keys(t).length&&this.addSelect(t)}else this.addSelect(this.getOptions()),this.addSelect({})}},{key:"onChange",value:function(e){e.hasClass("locked")&&e.closest(".wc-facebook-google-product-category-field").nextAll().remove();var o=e.val();if(o){var t=this.getOptions(o);Object.keys(t).length&&this.addSelect(t)}else o=e.closest("#wc-facebook-google-product-category-fields").find(".wc-facebook-google-product-category-select").not(e).last().val();l("#"+this.input_id).val(o)}},{key:"addSelect",value:function(o,e){var t=l("#wc-facebook-google-product-category-fields"),c=t.find(".wc-facebook-google-product-category-select"),a=l('<select class="wc-enhanced-select wc-facebook-google-product-category-select"></select>');c.addClass("locked"),t.append(l('<div class="wc-facebook-google-product-category-field" style="margin-bottom: 16px">').append(a)),a.attr("data-placeholder",this.getSelectPlaceholder(c,o)).append(l('<option value=""></option>')),Object.keys(o).forEach(function(e){a.append(l('<option value="'+e+'">'+o[e]+"</option>"))}),a.val(e).select2({allowClear:!0})}},{key:"getSelectPlaceholder",value:function(e,o){return 0===e.length?facebook_for_woocommerce_google_product_category.i18n.top_level_dropdown_placeholder:1===e.length&&0===Object.keys(o).length?facebook_for_woocommerce_google_product_category.i18n.second_level_empty_dropdown_placeholder:facebook_for_woocommerce_google_product_category.i18n.general_dropdown_placeholder}},{key:"getOptions",value:function(e){return void 0===e||""===e?this.getTopLevelOptions():void 0===this.categories[e]||void 0===this.categories[e].options?[]:this.categories[e].options}},{key:"getTopLevelOptions",value:function(){var o=this,t={};return Object.keys(this.categories).forEach(function(e){o.categories[e].parent||(t[e]=o.categories[e].label)}),t}},{key:"getSelectedCategoryIds",value:function(e){for(var o=[];void 0!==this.categories[e]&&(o.push([e,this.categories[e].parent]),e=this.categories[e].parent),""!==e;);return o.reverse()}}]),a)});
//# sourceMappingURL=google-product-category-fields.min.js.map
